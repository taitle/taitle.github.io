<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Combining Multiple Design Patterns in Java - Blog</title>
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Combining Multiple Design Patterns in Java" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="For a school related project, I had to design an application combining multiple Design Patterns and implement it in Java. Below is the given project description :" />
<meta property="og:description" content="For a school related project, I had to design an application combining multiple Design Patterns and implement it in Java. Below is the given project description :" />
<link rel="canonical" href="http://localhost:4000/2019/Combining-Multiple-Design-Patterns-in-Java/" />
<meta property="og:url" content="http://localhost:4000/2019/Combining-Multiple-Design-Patterns-in-Java/" />
<meta property="og:site_name" content="Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-23T19:15:02+03:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@https://twitter.com/taitlex" />
<script type="application/ld+json">
{"description":"For a school related project, I had to design an application combining multiple Design Patterns and implement it in Java. Below is the given project description :","@type":"BlogPosting","url":"http://localhost:4000/2019/Combining-Multiple-Design-Patterns-in-Java/","headline":"Combining Multiple Design Patterns in Java","dateModified":"2019-01-23T19:15:02+03:00","datePublished":"2019-01-23T19:15:02+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/Combining-Multiple-Design-Patterns-in-Java/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  
  <link rel="alternate" type="application/rss+xml" title="Blog" href="http://localhost:4000/feed.xml">
  <link rel="stylesheet" href="/assets/css/nangka.css">

  

</head>

  <body>
    <header class="site-header">
    <div class="wrapper">
        <a href="#" class="menu-icon">
            <svg viewbox="0 0 18 15">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path>
                <path d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path>
                <path d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path>
            </svg>
        </a>
        <a class="site-title" href="/">Blog</a>
        <nav class="site-nav">
            <div class="trigger">
            
                
            
                
                        <a class="page-link" href="/about/">About</a>
                
            
                
                        <a class="page-link" href="/archive/">Archive</a>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        </nav>
    </div>
</header>

    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Combining Multiple Design Patterns in Java</h1>
    <p class="post-meta">
       <time datetime="2019-01-23T19:15:02+03:00" itemprop="datePublished">
          Jan 23, 2019
       </time>
       
        | <span class="time">
            13
          </span>
           Minute Read
    </p>
  </header>
  <div class="post-content" itemprop="articleBody">
    <p>For a school related project, I had to design an application combining multiple Design Patterns and implement it in Java. Below is the given project description :</p>

<p><img src="http://localhost:4000/assets/img/desc.png" alt="Project Description"></p>

<p>So, first of all we have to infer which design patterns we are supposed to use from the given text.</p>
<ul>
  <li>First sentence indicates we should use Observer Pattern</li>
  <li>“Family of sensors” manufactured by different factories, so Abstract Factory Pattern it is</li>
  <li>Adaptability for SMS, so Adapter Pattern will be used</li>
  <li>Different commands will be executed, so Command Pattern should be used</li>
  <li>Single object creation, so Singleton Pattern will be used</li>
</ul>

<p>So, we are gonna have to combine 5 patterns to implement the application. First of all, let’s see what the final output of the program will be like, and how the main function is implemented.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainProject</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">arg</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">SingleObject</span> <span class="n">logFile</span> <span class="o">=</span> <span class="n">SingleObject</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

        <span class="n">SensorFactory</span> <span class="n">factory</span><span class="o">;</span>
        <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FactoryX</span><span class="o">();</span>

        <span class="n">AlarmForMotion</span> <span class="n">alarm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlarmForMotion</span><span class="o">();</span>
        <span class="n">SprinklerForSmoke</span> <span class="n">sprinkler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SprinklerForSmoke</span><span class="o">();</span>

        <span class="n">SensorForSmoke</span> <span class="n">smokesensor</span> <span class="o">=</span>  <span class="n">factory</span><span class="o">.</span><span class="na">createSmokeSensor</span><span class="o">();</span>
        <span class="n">SensorForMotion</span> <span class="n">motionsensor</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">createMotionSensor</span><span class="o">();</span>

        <span class="n">SensorSystem</span> <span class="n">sensorSystem</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SensorSystem</span><span class="o">();</span>
        <span class="n">sensorSystem</span><span class="o">.</span><span class="na">register</span><span class="o">((</span><span class="n">SensorListener</span><span class="o">)</span> <span class="n">smokesensor</span><span class="o">);</span>
        <span class="n">sensorSystem</span><span class="o">.</span><span class="na">register</span><span class="o">((</span><span class="n">SensorListener</span><span class="o">)</span> <span class="n">motionsensor</span><span class="o">);</span>
        <span class="n">sensorSystem</span><span class="o">.</span><span class="na">notifyUser</span><span class="o">();</span>

        <span class="n">HomeSecurityRemote</span> <span class="n">remote</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HomeSecurityRemote</span><span class="o">();</span>
        <span class="n">remote</span><span class="o">.</span><span class="na">setCommand</span><span class="o">(</span><span class="k">new</span> <span class="n">StopAlarmCommand</span><span class="o">(</span> <span class="n">alarm</span> <span class="o">));</span>
        <span class="n">remote</span><span class="o">.</span><span class="na">buttonPressed</span><span class="o">();</span>

        <span class="n">remote</span><span class="o">.</span><span class="na">setCommand</span><span class="o">(</span><span class="k">new</span> <span class="n">TurnOffSprinklerCommand</span><span class="o">(</span><span class="n">sprinkler</span><span class="o">));</span>
        <span class="n">remote</span><span class="o">.</span><span class="na">buttonPressed</span><span class="o">();</span>
	    <span class="o">}</span>
	<span class="o">}</span></code></pre></figure>

<p>First we create the Singleton object. Second, as per the requirements, family of sensors should be produced by different factories. We create the factory with FactoryX and use it to produce motion and smoke sensors. Then the sensors are triggered and the user is notified. The remote is used to start and stop the Alarm and the Sprinkler.</p>

<p>So, we can see that (in order) Singleton, Observer, Abstract Factory and Command patterns have been used in Main. Only Adapter is missing, which is not directly called in main.</p>

<p>Let’s start with the Singleton Pattern, as it will be the easiest to implement.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SingleObject</span> <span class="o">{</span>

    <span class="c1">//create an object of SingleObject</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">SingleObject</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SingleObject</span><span class="o">();</span>
    <span class="c1">//make the constructor private so that this class cannot be</span>
    <span class="c1">//instantiated</span>
    <span class="kd">private</span> <span class="nf">SingleObject</span><span class="o">(){}</span>

    <span class="c1">//Get the only object available</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">SingleObject</span> <span class="nf">getInstance</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">showMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">+</span><span class="s">" detected"</span><span class="o">);</span>
	    <span class="o">}</span>
	<span class="o">}</span></code></pre></figure>

<p>This piece of code is pretty much the same in all the examples you would find with a quick google search. Only in the showMessage function, we print a statement (normally to a log file, but anyways) to see that the object is created and created only once.</p>

<p>Now we can move on to the next line, creating the factory and the sensors. Let’s see it in the class diagram first.</p>

<p><img src="http://localhost:4000/assets/img/factory.png" alt="Abstract Factory Class Diagram"></p>

<p>Let’s start with implementing the interface first, then we will write the concrete classes.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">SensorFactory</span> <span class="o">{</span>
		<span class="n">SensorForMotion</span> <span class="nf">createMotionSensor</span><span class="o">();</span>
		<span class="n">SensorForSmoke</span> <span class="nf">createSmokeSensor</span><span class="o">();</span>
	<span class="o">}</span></code></pre></figure>

<p>Each factory will write code for this interface. In this scenario, I’ve created only two factories, FactoryX and FactoryY. Following is the code for their concrete classes:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">FactoryX</span> <span class="kd">implements</span> <span class="n">SensorFactory</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">SensorForMotion</span> <span class="nf">createMotionSensor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">XMotionSensor</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">SensorForSmoke</span> <span class="nf">createSmokeSensor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">XSmokeSensor</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">FactoryY</span> <span class="kd">implements</span> <span class="n">SensorFactory</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">SensorForMotion</span> <span class="nf">createMotionSensor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">YMotionSensor</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">SensorForSmoke</span> <span class="nf">createSmokeSensor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">YSmokeSensor</span><span class="o">();</span>
	    <span class="o">}</span>
	<span class="o">}</span></code></pre></figure>

<p>Now let’s take a look at the class diagram for the sensors.</p>

<p><img src="http://localhost:4000/assets/img/sensors.png" alt="Sensors"></p>

<p>SensorListener class is not of our concern right now, we will deal with it later when we implement the Observer Pattern. Again, let’s start with the interfaces first, then move on to the concrete classes.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">SensorForSmoke</span> <span class="o">{</span>  
		<span class="n">String</span> <span class="nf">getDescription</span><span class="o">();</span>  
	<span class="o">}</span>
	</code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">SensorForMotion</span> <span class="o">{</span>
        <span class="n">String</span> <span class="nf">getDescription</span><span class="o">();</span>
    <span class="o">}</span></code></pre></figure>

<p>Normally you would have a better function than getDescription, but since our application is not supposed to work and instead just print stuff, we will just implement it like this.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">XSmokeSensor</span> <span class="kd">implements</span> <span class="n">SensorForSmoke</span><span class="o">,</span> <span class="n">SensorListener</span> <span class="o">{</span>
    
        <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DESCRIPTION</span> <span class="o">=</span> <span class="s">"This is the FactoryX made Smoke Sensor."</span><span class="o">;</span>
    
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">getDescription</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">DESCRIPTION</span><span class="o">;</span>
        <span class="o">}</span>
    
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">detected</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">Sms</span> <span class="n">sms</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SmokeSmsAdapter</span><span class="o">(</span><span class="k">new</span> <span class="n">SmokeSms</span><span class="o">());</span>
    
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Smoke Sensor - Created by Factory X"</span><span class="o">);</span>
            <span class="n">sms</span><span class="o">.</span><span class="na">sendMessage</span><span class="o">(</span><span class="s">"SMOKE detected"</span><span class="o">);</span>
    
            <span class="n">SprinklerForSmoke</span> <span class="n">sprinkler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SprinklerForSmoke</span><span class="o">();</span>
            <span class="n">TurnOnSprinklerCommand</span> <span class="n">turnon</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnOnSprinklerCommand</span><span class="o">(</span><span class="n">sprinkler</span><span class="o">);</span>
            <span class="n">turnon</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
    
            <span class="n">SingleObject</span> <span class="n">logFile</span> <span class="o">=</span> <span class="n">SingleObject</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
            <span class="n">logFile</span><span class="o">.</span><span class="na">showMessage</span><span class="o">(</span><span class="s">"logfile: SMOKE"</span><span class="o">);</span>
    
        <span class="o">}</span>
    <span class="o">}</span>
    </code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">XMotionSensor</span> <span class="kd">implements</span> <span class="n">SensorForMotion</span><span class="o">,</span> <span class="n">SensorListener</span> <span class="o">{</span>
    
        <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DESCRIPTION</span> <span class="o">=</span> <span class="s">"This is the FactoryX made Motion Sensor."</span><span class="o">;</span>
    
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">getDescription</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">DESCRIPTION</span><span class="o">;</span>
        <span class="o">}</span>
    
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">detected</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">Sms</span> <span class="n">sms</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MotionSmsAdapter</span><span class="o">(</span><span class="k">new</span> <span class="n">MotionSms</span><span class="o">());</span>
    
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Motion Sensor - Created by Factory X"</span><span class="o">);</span>
            <span class="n">sms</span><span class="o">.</span><span class="na">sendMessage</span><span class="o">(</span><span class="s">"MOTION detected"</span><span class="o">);</span>
    
            <span class="c1">//I could have invoked the alarm directly, but this is better suited for command pattern</span>
            <span class="n">AlarmForMotion</span> <span class="n">alarm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlarmForMotion</span><span class="o">();</span>
            <span class="n">StartAlarmCommand</span> <span class="n">start</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StartAlarmCommand</span><span class="o">(</span><span class="n">alarm</span><span class="o">);</span>
            <span class="n">start</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
    
            <span class="n">SingleObject</span> <span class="n">logFile</span> <span class="o">=</span> <span class="n">SingleObject</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
            <span class="n">logFile</span><span class="o">.</span><span class="na">showMessage</span><span class="o">(</span><span class="s">"logfile: MOTION"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<p>Now that we have the Abstract Factory implemented, we get a better picture of how the sensors will work. And like I mentioned earlier, Adapter Pattern was not called in Main, but in the sensors. Let’s see how the Adapter pattern is implemented in.</p>

<p><img src="http://localhost:4000/assets/img/sms.png" alt="SMS class diagram"></p>

<p>Interface first:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Sms</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">);</span>
	<span class="o">}</span></code></pre></figure>

<p>Concrete classes:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MotionSmsAdapter</span> <span class="kd">implements</span> <span class="n">Sms</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">MotionSms</span> <span class="n">adaptee</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MotionSmsAdapter</span><span class="o">(</span><span class="n">MotionSms</span> <span class="n">motionsms</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">adaptee</span> <span class="o">=</span> <span class="n">motionsms</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"SMS from MOTION ADAPTER: "</span> <span class="o">+</span><span class="n">s</span><span class="o">);</span>
        <span class="c1">//here the message can be modified, adapted, whatever</span>
        <span class="c1">//we will just print a slightly modified message, that's it</span>
	    <span class="o">}</span>
	<span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SmokeSmsAdapter</span> <span class="kd">implements</span> <span class="n">Sms</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="n">SmokeSms</span> <span class="n">adaptee</span><span class="o">;</span>
    
        <span class="kd">public</span> <span class="nf">SmokeSmsAdapter</span><span class="o">(</span><span class="n">SmokeSms</span> <span class="n">smokesms</span><span class="o">){</span>
            <span class="k">this</span><span class="o">.</span><span class="na">adaptee</span> <span class="o">=</span> <span class="n">smokesms</span><span class="o">;</span>
        <span class="o">}</span>
    
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"SMS from SMOKE ADAPTER: "</span> <span class="o">+</span><span class="n">s</span><span class="o">);</span>
            <span class="c1">//here the message can be modified, adapted, whatever</span>
            <span class="c1">//we will just print a slightly modified message, that's it</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MotionSms</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"SMS from MOTION detector. Message is: "</span><span class="o">+</span><span class="n">s</span><span class="o">);</span>
            <span class="c1">//real SMS code goes here</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SmokeSms</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"SMS from SMOKE detector. Message is: "</span><span class="o">+</span><span class="n">s</span><span class="o">);</span>
            <span class="c1">//real SMS code goes here</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<p>Now let’s look at how these sensors are used with Observer Pattern. Interface first:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">interface</span> <span class="nc">SensorListener</span> <span class="o">{</span>
        <span class="kt">void</span> <span class="nf">detected</span><span class="o">();</span>
    <span class="o">}</span></code></pre></figure>

<p>“detected” functionality was implemented in previous classes. So the only thing left is this class:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kn">import</span> <span class="nn">java.util.Enumeration</span><span class="o">;</span>  
    <span class="kn">import</span> <span class="nn">java.util.Vector</span><span class="o">;</span>  
      
    <span class="kd">class</span> <span class="nc">SensorSystem</span> <span class="o">{</span>  
        <span class="kd">private</span> <span class="n">Vector</span> <span class="n">listeners</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Vector</span><span class="o">();</span>  
      
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">register</span><span class="o">(</span><span class="n">SensorListener</span> <span class="n">sensorListener</span><span class="o">)</span> <span class="o">{</span>  
            <span class="n">listeners</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="n">sensorListener</span><span class="o">);</span>  
      <span class="o">}</span>  
      
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">notifyUser</span><span class="o">()</span> <span class="o">{</span>  
            <span class="k">for</span> <span class="o">(</span><span class="n">Enumeration</span> <span class="n">e</span> <span class="o">=</span> <span class="n">listeners</span><span class="o">.</span><span class="na">elements</span><span class="o">();</span> <span class="n">e</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">();)</span> <span class="o">{</span>  
                <span class="o">((</span><span class="n">SensorListener</span><span class="o">)</span> <span class="n">e</span><span class="o">.</span><span class="na">nextElement</span><span class="o">()).</span><span class="na">detected</span><span class="o">();</span>  
	    <span class="o">}</span>  
       <span class="o">}</span>  
   <span class="o">}</span></code></pre></figure>

<p>Here we register the events that took place and let the objects call their detected functions when the notifyUser is called.</p>

<p>Now the only thing left is the Command pattern. In case you want to check on the Main function again to remember how it was called:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="n">AlarmForMotion</span> <span class="n">alarm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlarmForMotion</span><span class="o">();</span>
    <span class="n">SprinklerForSmoke</span> <span class="n">sprinkler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SprinklerForSmoke</span><span class="o">();</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="n">HomeSecurityRemote</span> <span class="n">remote</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HomeSecurityRemote</span><span class="o">();</span>  
    <span class="n">remote</span><span class="o">.</span><span class="na">setCommand</span><span class="o">(</span><span class="k">new</span> <span class="n">StopAlarmCommand</span><span class="o">(</span> <span class="n">alarm</span> <span class="o">));</span>  
    <span class="n">remote</span><span class="o">.</span><span class="na">buttonPressed</span><span class="o">();</span>  
      
    <span class="n">remote</span><span class="o">.</span><span class="na">setCommand</span><span class="o">(</span><span class="k">new</span> <span class="n">TurnOffSprinklerCommand</span><span class="o">(</span><span class="n">sprinkler</span><span class="o">));</span>  
    <span class="n">remote</span><span class="o">.</span><span class="na">buttonPressed</span><span class="o">();</span></code></pre></figure>

<p>The class diagram:
<img src="http://localhost:4000/assets/img/command.png" alt="Command Pattern Class Diagram"></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Command</span> <span class="o">{</span>  
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">();</span>  
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeSecurityRemote</span> <span class="o">{</span>
        <span class="n">Command</span> <span class="n">command</span><span class="o">;</span>
    
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCommand</span><span class="o">(</span><span class="n">Command</span> <span class="n">command</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">command</span> <span class="o">=</span> <span class="n">command</span><span class="o">;</span>
        <span class="o">}</span>
    
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">buttonPressed</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">command</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TurnOffSprinklerCommand</span> <span class="kd">implements</span> <span class="n">Command</span><span class="o">{</span>
        <span class="n">SprinklerForSmoke</span> <span class="n">sprinkler</span><span class="o">;</span>
    
        <span class="kd">public</span> <span class="nf">TurnOffSprinklerCommand</span><span class="o">(</span><span class="n">SprinklerForSmoke</span> <span class="n">sprinkler</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">();</span>
            <span class="k">this</span><span class="o">.</span><span class="na">sprinkler</span> <span class="o">=</span> <span class="n">sprinkler</span><span class="o">;</span>
        <span class="o">}</span>
    
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Turning off sprinkler."</span><span class="o">);</span>
            <span class="n">sprinkler</span><span class="o">.</span><span class="na">turnOff</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TurnOnSprinklerCommand</span> <span class="kd">implements</span> <span class="n">Command</span><span class="o">{</span>
        <span class="n">SprinklerForSmoke</span> <span class="n">sprinkler</span><span class="o">;</span>
    
        <span class="kd">public</span> <span class="nf">TurnOnSprinklerCommand</span><span class="o">(</span><span class="n">SprinklerForSmoke</span> <span class="n">sprinkler</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">();</span>
            <span class="k">this</span><span class="o">.</span><span class="na">sprinkler</span> <span class="o">=</span> <span class="n">sprinkler</span><span class="o">;</span>
        <span class="o">}</span>
    
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Turning on sprinkler."</span><span class="o">);</span>
            <span class="n">sprinkler</span><span class="o">.</span><span class="na">turnOn</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">StartAlarmCommand</span> <span class="kd">implements</span> <span class="n">Command</span><span class="o">{</span>  
        <span class="n">AlarmForMotion</span> <span class="n">alarm</span><span class="o">;</span>  
      
     <span class="kd">public</span> <span class="nf">StartAlarmCommand</span><span class="o">(</span><span class="n">AlarmForMotion</span> <span class="n">alarm</span><span class="o">)</span> <span class="o">{</span>  
            <span class="kd">super</span><span class="o">();</span>  
     <span class="k">this</span><span class="o">.</span><span class="na">alarm</span> <span class="o">=</span> <span class="n">alarm</span><span class="o">;</span>  
      <span class="o">}</span>  
      
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>  
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Starting Alarm."</span><span class="o">);</span>  
      <span class="n">alarm</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>  
      <span class="o">}</span>  
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">StopAlarmCommand</span> <span class="kd">implements</span> <span class="n">Command</span><span class="o">{</span>
        <span class="n">AlarmForMotion</span> <span class="n">alarm</span><span class="o">;</span>
    
        <span class="kd">public</span> <span class="nf">StopAlarmCommand</span><span class="o">(</span><span class="n">AlarmForMotion</span> <span class="n">alarm</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">();</span>
            <span class="k">this</span><span class="o">.</span><span class="na">alarm</span> <span class="o">=</span> <span class="n">alarm</span><span class="o">;</span>
        <span class="o">}</span>
    
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Stopping Alarm."</span><span class="o">);</span>
            <span class="n">alarm</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SprinklerForSmoke</span> <span class="o">{</span>
        <span class="kd">public</span>  <span class="kt">void</span> <span class="nf">turnOn</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sprinkler is on"</span><span class="o">);</span>
        <span class="o">}</span>
    
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">turnOff</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sprinkler is off"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<hr>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">AlarmForMotion</span> <span class="o">{</span>
        <span class="kt">void</span> <span class="nf">start</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Alarm Started.."</span><span class="o">);</span>
        <span class="o">}</span>
    
        <span class="kt">void</span> <span class="nf">stop</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Alarm stopped.."</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<p>And with the command pattern finished, we are done with the program. Here is the final class diagram:
<img src="http://localhost:4000/assets/img/uml.png" alt="Final class diagram"></p>

<p>I would’ve preferred to put down a references/resources list, but unfortunately I did not keep track of that. But it was all in pretty much the first page results for related pattern name searches.</p>

<p>I’ve used simpleUML to generate the UML class diagrams.</p>

<p>You can check the  <a href="http://localhost:4000/assets/DesignPatternsCode/DesignPatternsCode.zip">Github Repo</a> for the whole code.
That’s it for this post, and feel free to reach out for adjustments/improvements on the post.</p>

<p>BTW, I fuckin hate Java, just sayin’</p>

  </div>
  <footer class="post-footer">

    <!-- Social Share Button-->
    <ul class="sharebutton">
      <li class="share">Share :</li>
      <li class="linkedin">
        <a href="http://www.linkedin.com/cws/share?url=http://localhost:4000/2019/Combining-Multiple-Design-Patterns-in-Java/" onclick='window.open(this.href,"popupwindow","status=0,height=500,width=700,resizable=0,top=50,left=100");return false;' target="_blank" title="Share on Linkedin">Linkedin</a>
      </li>
      <li class="twitter">
        <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/2019/Combining-Multiple-Design-Patterns-in-Java/%20-%20Combining%20Multiple%20Design%20Patterns%20in%20Java%20by%20@https://twitter.com/taitlex" target="_blank" title="Share to Twitter">Twitter</a>
      </li>
      <li class="gplus">
        <a href="https://plus.google.com/share?url=http://localhost:4000/2019/Combining-Multiple-Design-Patterns-in-Java/" onclick='window.open(this.href,"popupwindow","status=0,height=500,width=700,resizable=0,top=50,left=100");return false;' target="_blank" title="Share on Google Plus">Google+</a>
    </li>
</ul>

    <!-- Post Navigation -->
    <div class="post-navigation">
      <a class="prev" href="/2017/answers-to-page-table-exercises-in-xv6/">← Previous Post</a>
      
    </div>
      

  </footer>
</article>

      </div>
    </div>
    <footer class="site-footer">
  <div class="wrapper">
      <div class="copy">
           
      </div>
  </div>
</footer>

    <script type="text/javascript" src="/assets/js/jquery-1.11.2.min.js"></script>

<script type="text/javascript" src="/assets/js/scripts.js"></script>

  </body>
</html>
